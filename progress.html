<!DOCTYPE html>
<html>
<head>
    <title>CTF Progress Tracker with Hints</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
<div class="container">
    <h1>CTF Progress Tracker</h1>
    <p>Enter your flags below to track your own progress. Hints are optional and safe.  
    Your progress is saved locally in your browser.</p>

    <hr>

    <h2>Your Progress</h2>
    <p id="progressText"></p>
    <div style="background:#ddd; width:100%; height:20px; border-radius:5px; margin-bottom:20px;">
        <div id="progressBar" style="background:#4CAF50; height:100%; width:0%; border-radius:5px;"></div>
    </div>

    <h2>Submit Flags</h2>

    <div id="challenges"></div>
</div>

<script>
// All flags
const FLAGS = {
    "Challenge 1 — HTML Inspection": "flag{simple_ctf_html}",
    "Challenge 2 — JavaScript Password": "flag{simple_ctf_js}",
    "Challenge 3 — URL Manipulation": "flag{simple_ctf_param}",
    "Challenge 4 — Encoding": "flag{simple_ctf_encoding}",
    "Challenge 5 — robots.txt": "flag{simple_ctf_robots}",
    "Challenge 6 — Cookie Challenge": "flag{simple_ctf_cookie}",
    "Bonus — Reflected Input (XSS Awareness)": "flag{simple_ctf_bonus_xss}",
    "Bonus — Crypto Puzzle (ROT13)": "flag{simple_ctf_crypto}",
    "Bonus — SQL Injection Simulation": "flag{simple_ctf_sql}",
    "Bonus — Steganography (Filename Clue)": "flag{simple_ctf_stego}",
    "Bonus — Logic Flaw / Auth Bypass": "flag{simple_ctf_logic}",
    "Bonus — Log Analysis": "flag{simple_ctf_logs}"
};

// Hints for each challenge
const HINTS = {
    "Challenge 1 — HTML Inspection": "Hint: Right-click on the page and select 'View Page Source' or 'Inspect Element'.",
    "Challenge 2 — JavaScript Password": "Hint: Check the JavaScript console for clues. Remember that you call a function by adding () to the name.",
    "Challenge 3 — URL Manipulation": "Hint: Look at the URL parameters and try changing 'role=user' to 'role=admin'.",
    "Challenge 4 — Encoding": "Hint: The flag is Base64-encoded. You can use an online decoder.",
    "Challenge 5 — robots.txt": "Hint: Check the /robots.txt file for hidden paths.",
    "Challenge 6 — Cookie Challenge": "Hint: Open DevTools → Application → Cookies and modify the 'role' cookie.",
    "Bonus — Reflected Input (XSS Awareness)": "Hint: Try typing <script> to see what happens in the output.",
    "Bonus — Crypto Puzzle (ROT13)": "Hint: The message is encrypted using ROT13. An online ROT13 decoder helps.",
    "Bonus — SQL Injection Simulation": "Hint: Try 'admin' OR '1'='1' in the username field.",
    "Bonus — Steganography (Filename Clue)": "Hint: Inspect the image filename in the HTML source.",
    "Bonus — Logic Flaw / Auth Bypass": "Hint: Any email containing '@admin' bypasses the check.",
    "Bonus — Log Analysis": "Hint: Look for the repeated failed login IP address in the logs."
};

// Load saved progress from browser
let progress = JSON.parse(localStorage.getItem("ctf_progress")) || {};

function saveProgress() {
    localStorage.setItem("ctf_progress", JSON.stringify(progress));
    updateProgressDisplay();
}

function updateProgressDisplay() {
    let completed = Object.values(progress).filter(v => v === true).length;
    let total = Object.keys(FLAGS).length;

    document.getElementById("progressText").innerText =
        `Completed: ${completed} / ${total} challenges`;

    let percent = (completed / total) * 100;
    document.getElementById("progressBar").style.width = percent + "%";
}

// Build UI
const container = document.getElementById("challenges");

Object.keys(FLAGS).forEach(title => {
    const div = document.createElement("div");
    div.style.marginBottom = "25px";

    div.innerHTML = `
        <strong>${title}</strong><br>
        <input id="input-${title}" placeholder="Enter flag" style="width:300px;">
        <button onclick="checkFlag('${title}')">Submit</button>
        <span id="result-${title}" style="margin-left:10px;"></span><br>
        <button onclick="showHint('${title}')" style="margin-top:5px;">Show Hint</button>
        <div id="hint-${title}" style="margin-top:5px; color:blue;"></div>
    `;

    container.appendChild(div);
});

function checkFlag(title) {
    const inputField = document.getElementById(`input-${title}`);
    const resultField = document.getElementById(`result-${title}`);

    if (inputField.value.trim() === FLAGS[title]) {
        resultField.innerHTML = "<span style='color:green;'>✔ Correct!</span>";
        progress[title] = true;
        saveProgress();
    } else {
        resultField.innerHTML = "<span style='color:red;'>✖ Incorrect</span>";
    }
}

function showHint(title) {
    const hintField = document.getElementById(`hint-${title}`);
    hintField.innerText = HINTS[title];
}

updateProgressDisplay();
</script>
</body>
</html>

